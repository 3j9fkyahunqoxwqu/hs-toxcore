name:                 hstox
synopsis:             A Tox protocol implementation in Haskell
version:              0.0.1
cabal-version:        >= 1.10
license:              AGPL-3
license-file:         LICENSE.md
build-type:           Simple
author:               iphy
maintainer:           iphy
copyright:            Â© 2016 iphy
homepage:             http://hstox.github.io
category:             Network
description:          A Tox protocol implementation in Haskell

Flag ToxCore
  Description: Build test-toxcore binary
  Default:     False

source-repository head
  type: git
  location: https://github.com/iphydf/hstox

library
  default-language: Haskell2010
  hs-source-dirs:
      src
    , msgpack
  ghc-options:
      -Wall
      -Werror
  build-depends:
      base < 5
    , QuickCheck
    , aeson >= 0.10
    , base16-bytestring
    , binary
    , binary-bits
    , binary-conduit
    , bytestring
    , conduit
    , conduit-extra
    , containers
    , data-binary-ieee754
    , deepseq
    , exceptions
    , hashable
    , integer-gmp
    , iproute
    , monad-control
    , mtl
    , network
    , saltine
    , scientific
    , split
    , tagged
    , text
    , transformers
    , unordered-containers
    , vector
  exposed-modules:
      Data.MessagePack
      Data.MessagePack.Aeson
      Data.MessagePack.Assoc
      Data.MessagePack.Class
      Data.MessagePack.Get
      Data.MessagePack.Object
      Data.MessagePack.Put
      Network.MessagePack.Client
      Network.MessagePack.Server
      Network.Tox
      Network.Tox.Binary
      Network.Tox.Crypto
      Network.Tox.Crypto.Box
      Network.Tox.Crypto.CombinedKey
      Network.Tox.Crypto.Key
      Network.Tox.Crypto.KeyPair
      Network.Tox.Crypto.Nonce
      Network.Tox.Crypto.Text
      Network.Tox.DHT
      Network.Tox.DHT.DhtPacket
      Network.Tox.DHT.DhtState
      Network.Tox.DHT.Distance
      Network.Tox.DHT.KBuckets
      Network.Tox.DHT.NodesRequest
      Network.Tox.DHT.NodesResponse
      Network.Tox.DHT.PingPacket
      Network.Tox.DHT.RpcPacket
      Network.Tox.Encoding
      Network.Tox.NodeInfo
      Network.Tox.NodeInfo.HostAddress
      Network.Tox.NodeInfo.NodeInfo
      Network.Tox.NodeInfo.PortNumber
      Network.Tox.NodeInfo.SocketAddress
      Network.Tox.NodeInfo.TransportProtocol
      Network.Tox.Protocol
      Network.Tox.Protocol.Packet
      Network.Tox.Protocol.PacketKind
      Network.Tox.RPC

executable test-server
  default-language: Haskell2010
  hs-source-dirs:
      test-server
  ghc-options:
      -Wall
      -Werror
  build-depends:
      base < 5
    , hstox
  main-is:
      TestServer.hs

executable test-toxcore
  default-language: Haskell2010
  hs-source-dirs:   test-toxcore
  build-depends:    base < 5
  extra-libraries:  msgpackc
  c-sources:        test-toxcore/driver.c test-toxcore/methods.c
  main-is:          TestToxcore.hs
  if !flag(ToxCore)
    buildable: False

test-suite test-tox
  default-language: Haskell2010
  hs-source-dirs:
      test-tox
  ghc-options:
      -Wall
      -Werror
  build-depends:
      base < 5
    , QuickCheck
    , aeson >= 0.10
    , async
    , base16-bytestring
    , binary
    , binary-bits
    , bytestring
    , containers
    , hashable
    , hspec
    , hstox
    , mtl
    , network
    , saltine
    , text
    , transformers
    , unordered-containers
  type:
      exitcode-stdio-1.0
  main-is:
      TestSuite.hs
